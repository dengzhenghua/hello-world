# es后台设置用户操作手册


## 1.总流程图
es后台配置管理系统是将数据库（mysql,oracle,hbase,mongo）中的数据通过配置系统存放在es中，在通过es对数据进行检索等操作。

![enter description here][1]


## 2.数据源配置
目前系统支持的数据库类型有四类：mysql,oracle,hbase,mongo

### 2.1新增数据源
后台管理员登录系统后进入“服务中心-ES配置管理-数据源配置”，点击新增操作，进入新增数据源配置界面，如下图：

![enter description here][2]

数据源版本的设置需要跟系统发布时版本的配置一致，否则新增或修改采集计划时不能被选中。

### 2.2编辑数据源
后台管理员登录系统后进入“服务中心-ES配置管理-数据源配置”，选择需要编辑的数据源点击编辑操作，进入编辑数据源配置界面，如下图：

![enter description here][3]

编辑同上的新增操作。

### 2.3删除数据源

数据源配置中选择需要删除的数据源信息，点击删除操作即可，删除数据源后，采集计划的处理？？？


## 3.索引管理

### 3.1新增索引
后台管理员登录系统后进入“服务中心-ES配置管理-索引管理”，点击新增操作，进入新增索引管理置界面，如下图：

![enter description here][4]

索引库的名称需要与系统配置中的索引一致，同时确定系统对接的索引库正常启动才能确保索引库成功创建。

### 3.2删除索引

数据源配置中选择需要删除的数据源信息，点击删除操作即可。

### 3.3配置查询权重

后台管理员登录系统后进入“服务中心-ES配置管理-索引管理”，选择需要配置权重的索引，点击“配置查询权重”，进入配置界面，如下图：

![enter description here][5]

此处权重配置与查询结果排序关联。


### 3.4增加搜索历史

后台管理员登录系统后进入“服务中心-ES配置管理-索引管理”，选择需要增加搜索历史的索引，点击“增加搜索历史”操作确认即可，



## 4.采集计划

### 4.1新增采集计划

后台管理员登录系统后进入“服务中心-ES配置管理-采集计划”，点击新增操作，进入新增采集计划映射配置界面，如下图：

![enter description here][6]

选择需要采集计划的类型确认后，进入新增计划界面，如下图：

![enter description here][7]


### 4.2修改采集计划

采集计划中选择需要修改的计划，点击修改操作，直接跳转到修改界面，修改的内容同新增内容。

### 4.3复制采集计划

采集计划中选择想要复制的计划，点击复制操作，直接跳转到编辑界面，编辑的内容同新增内容。

### 4.4删除采集计划

采集计划管理列表中选择要删除的计划，点击删除操作，确认后即删除计划

### 4.5采集计划执行

选择需要执行的采集计划，点击“批量执行”操作，或者可对某一个采集计划进行开始操作，即可开始采集数据。

### 4.5查看采集计划执行日志

后台管理员登录系统后进入“服务中心-ES配置管理-采集计划日志”，列表中显示所有执行的采集计划的结果信息，如下图：

![enter description here][8]

## 5.执行计划

### 5.1新增操作

后台管理员登录系统后进入“服务中心-ES配置管理-执行计划”，点击“新增”操作进入新增界面，如下图：

![enter description here][9]

执行计划：执行计划的选择项为采集计划列表。
bean名称：默认collectionPlanService，可扩展。
方法名：默认startExecute。

### 5.2关闭/开启操作

选择需要定时执行的执行计划，点击“关闭/开启”操作。即开始或停止定时任务。


## 6.关系配置

后台管理员登录系统后进入“服务中心-ES配置管理-关系配置”。

### 6.1关系配置管理

关系配置管理界面中点击“新增”操作进入新增关系配置界面，如下图：

![enter description here][10]

关联的集合及关联字段：在采集计划中设置需要配置关联关系的索引字段中关联字段的信息为选中状态即可，如下图：

![enter description here][11]

### 6.2查看关系信息


##  7自定义分词

后台管理员登录系统后进入“服务中心-ES配置管理-自定义分词”，此模块可对自定义分词进行新增、查看、删除操作。

### 7.1自定义分词检索操作


  [1]: ./images/1501572731397.jpg "1501572731397.jpg"
  [2]: ./images/1501574648337.jpg "1501574648337.jpg"
  [3]: ./images/1501575548878.jpg "1501575548878.jpg"
  [4]: ./images/1501577638536.jpg "1501577638536.jpg"
  [5]: ./images/1501579026863.jpg "1501579026863.jpg"
  [6]: ./images/1501579677959.jpg "1501579677959.jpg"
  [7]: ./images/1501579930066.jpg "1501579930066.jpg"
  [8]: ./images/1501633905886.jpg "1501633905886.jpg"
  [9]: ./images/1501634206072.jpg "1501634206072.jpg"
  [10]: ./images/1501635401115.jpg "1501635401115.jpg"
  [11]: ./images/1501635465611.jpg "1501635465611.jpg"