## 数据订阅
[TOC] 严婷婷



### 数据订阅查询总条数

|        |                                          |
| ------ | ---------------------------------------- |
| url    | url:http://59.202.29.209:21100/commonapi/login](测试ip:192.168.1.148) |
| method | POST                                     |

#### 参数

|   name    |  type  | mandatory |   描述   | 取值范围 |
| :-------: | :----: | :-------: | :----: | ---- |
| userName  | string |           | 登陆用户账号 |      |
| loginCsid | String |           |  sid   |      |



返回格式


```html


<!DOCTYPE html>
<html>
    <!-- 网页头 -->
    <head>
        <meta charset="utf-8">
        <title>登录</title>
        <link type="text/css" href="/resource/login/css/layout.css" rel="stylesheet" />
        <style>
    .cellectionh1 span {
      font-size: 32px;
      line-height: 100px;
      color: #03adf5;
      vertical-align: top;
    }

  </style>

    </head>
    <body>
        <section class="canvas-wrap">
            <!-- 背景3D动画-->
            <div id="canvas" class="gradient"></div>
            <!-- 背景3D动画-->
            <div class="loginBox">
                <!-- 顶部提示-->
                <div class="prompt none">
                    <span></span>
                    <i>×</i>
    
                </div>
                <!-- 顶部提示-->
                <h1 class="cellectionh1">
                    <img class="logo" src="/resource/login/images/admin-logo.png" alt=""/>
                    <span>COLLECT</span>
                </h1>
                <form action="/login" method="post" id="loginform-inner">
                    <div class="pr">
                        <img src="/resource/login/images/os/user.png" alt=""/>
                        <input id="username" name="userName" type="text" class="user" placeholder="请输入账号" />
      
                    </div>
                    <div class="pr">
                        <img src="/resource/login/images/os/pwd.png" alt=""/>
                        <input id="password" type="password" name="password" class="pwd" placeholder="请输入密码" />
      
                    </div>
                    <span class="check ">
                        <span></span>记住用户名
                    </span>
                    <div class="login-btn">
                        <button class="btn blue" type="submit" id="loginButton">登 录</button>
      
                    </div>
    
                </form>
  
            </div>


        </section>
        <script src="/resource//login/js/jquery-3.1.1.min.js"></script>
        <script src="/resource//login/js/animate/three.min.js"></script>
        <script src="/resource//login/js/animate/projector.js"></script>
        <script src="/resource//login/js/animate/canvas-renderer.js"></script>
        <script src="/resource//login/js/animate/3d-lines-animation.js"></script>
        <script src="/resource/login/js/animate/color.js"></script>
        <script src="/resource/login/base/jquery.base.js"></script>
        <script src="/resource/login/base/jQuery.md5.js"></script>
        <script src="/resource/login/base/validate.js"></script>
        <script src="/resource/login/js/libs/formValidate.js"></script>
        <script>
  $.fn.extend({
    dialogtip:function(option){
      var defaultOption={
        className: 'tip-error',
        showOn: 'none',
        alignTo: 'target',
        hideTimeout:0,
        showTimeout:0,
        alignX: 'center',
        alignY: 'bottom',
        offsetX: 0,
        offsetY: 5
      }
      $.extend(defaultOption,option);
      $(this).poshytip(defaultOption);
    }
  })
  $(function() {
    $("#username").focus();
    $("#username,#password").bind("keydown",function(evt){
      var evt = window.event?window.event:evt;
      if(evt.keyCode==13){
        $('#loginform-inner').submit();
      }
    });

    $(".loginBox .check").click(function(){
      if($(this).hasClass("checked")){
        $(this).removeClass("checked");
      }else{
        $(this).addClass("checked");
      }
    });


    $("#loginform-inner").formValidate({
      rules: {},
      messages: {},
      submitHandler: function(form) {
        if($("#username").val()==""){
          $(".prompt").find('span').html("用户名不能为空！").end().fadeIn();
          return;
        }
        if($("#password").val()==""){
          $(".prompt").find('span').html("密码不能为空！").end().fadeIn();
          return;
        }
        $(".prompt").find('span').html("系统登录中...").end().fadeIn();
        $("#loginButton").attr('disabled', true);
        $("#password").val($.md5($("#password").val()));
        $(form).ajaxSubmit({
          success:function(data){
            if(data != null && data.success){
            	localStorage.setItem('userInfo',JSON.stringify(data.data.user))

              if(data.errorMsg){
                $(".prompt").find('span').html(data.errorMsg).end().fadeIn();
                $("#password").val("");
                $("#loginButton").attr('disabled', false);
              }else{
                document.location.href="/index.jsp";
              }
            }
          },
          error:function(xmlHttpRequest, textStatus, errorThrown){

          }
        });
        return false;
      }
    });

    // 关闭提示
    $('.prompt i').click(function() {
      $(this).parent().fadeOut()
    })

  })

</script>

    </body>

</html>

```

